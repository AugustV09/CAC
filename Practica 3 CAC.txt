4_a)
    IMR EQU 21H

    ORG 40
    DW GESTOR
    
    ORG 1000H
MSJ DB "VAMOS LAS INTERRUPCIONES!",10 ;LF
FIN DB ?

    ORG 3000H
GESTOR:
    PUSH AX
    MOV AL, OFFSET FIN - OFFSET MSJ
    INT 7  ;IMPRIMO EL MENSAJE
    MOV AL,20H
    OUT IMR-1,AL  ;PONGO 20H EN EOI
    POP AX
    IRET

    ORG 2000H
    CLI    ;INHABILITO LAS INTERRUPCIONES
    MOV AL,11111110b  ; ENMASCARO TODAS LAS INTERRUPCIONES MENOS LA DE F10
    OUT IMR,AL
    MOV AL,10
    OUT IMR+3,AL
    MOV BX,OFFSET MSJ
    STI    ;HABILITO LAS INTERRUPCIONES

LAZO:
    JMP LAZO
    HLT
    END

b)
    IMR EQU 21H

    ORG 40
    DW GESTOR
    
    ORG 1000H
MSJ DB "VAMOS LAS INTERRUPCIONES!",10  ;LF
FIN DB ?

    ORG 3000H
GESTOR:
    PUSH AX
    MOV AL, OFFSET FIN - OFFSET MSJ
    INT 7  ;IMPRIMO EL MENSAJE
    DEC DL
    MOV AL,20H
    OUT IMR-1,AL  ;PONGO 20H EN EOI
    POP AX
    IRET

    ORG 2000H
    CLI    ;INHABILITO LAS INTERRUPCIONES
    MOV AL,11111110b  ; ENMASCARO TODAS LAS INTERRUPCIONES MENOS LA DE F10
    OUT IMR,AL
    MOV AL,10
    OUT IMR+3,AL
    MOV DL,5  ;CONTROLA QUE EL PROGRAMA SE HAGA 5 VECES
    MOV BX,OFFSET MSJ
    STI    ;HABILITO LAS INTERRUPCIONES

LAZO:
    CMP DL,0
    JNZ LAZO
    HLT
    END

5_a)
    IMR EQU 21H
    TIMER EQU 10H  ;POSICION AL REGISTRO CONT DE TIMER
    
    ORG 40
    DW GESTOR
    
    ORG 1000H
MSJ DB "VAMOS LAS INTERRUPCIONES!",10  ;LF
FIN DB ?

    ORG 3000H
GESTOR:
    MOV AL, OFFSET FIN - OFFSET MSJ
    INT 7  ;IMPRIMO EL MENSAJE
    MOV AL,0
    OUT TIMER,AL
    MOV AL,20H
    OUT IMR-1,AL  ;PONGO 20H EN EOI
    IRET

    ORG 2000H
    CLI    ;INHABILITO LAS INTERRUPCIONES
    MOV AL,11111101b  ; ENMASCARO TODAS LAS INTERRUPCIONES MENOS LA DE F10
    OUT IMR,AL
    MOV AL,10
    OUT IMR+4,AL
    MOV BX, OFFSET MSJ ;ME GUARDO LA DIRECCION DEL VECTOR DE CARACTERES (MSJ + LF)
    MOV AL,2
    OUT TIMER+1,AL  ; PONGO EL REGISTRO COMP DEL TIMER EN 2
    MOV AL,0
    OUT TIMER,AL  ; PONGO EL CONT DEL TIMER EN 0
    STI    ;HABILITO LAS INTERRUPCIONES

LAZO:
    JMP LAZO
    HLT
    END

b)
    IMR EQU 21H
    TIMER EQU 10H  ;POSICION AL REGISTRO CONT DE TIMER
    
    ORG 40
    DW GESTOR
    
    ORG 1000H
MSJ DB "VAMOS LAS INTERRUPCIONES!",10  ;LF
FIN DB ?

    ORG 3000H
GESTOR:
    MOV AL, OFFSET FIN - OFFSET MSJ
    INT 7  ;IMPRIMO EL MENSAJE
    MOV AL,0
    OUT TIMER,AL
    DEC DL
    MOV AL,20H
    OUT IMR-1,AL  ;PONGO 20H EN EOI
    IRET

    ORG 2000H
    CLI    ;INHABILITO LAS INTERRUPCIONES
    MOV AL,11111101b  ; ENMASCARO TODAS LAS INTERRUPCIONES MENOS LA DE F10
    OUT IMR,AL
    MOV AL,10
    OUT IMR+4,AL
    MOV BX, OFFSET MSJ ;ME GUARDO LA DIRECCION DEL VECTOR DE CARACTERES (MSJ + LF)
    MOV DL,5  ; HACE QUE EL PROGRAMA DURE 10 SEGUNDOS (SE EJECUTE EL GESTOR CADA 2 SEG POR 10 SEG)
    MOV AL,2
    OUT TIMER+1,AL  ; PONGO EL REGISTRO COMP DEL TIMER EN 2
    MOV AL,0
    OUT TIMER,AL  ; PONGO EL CONT DEL TIMER EN 0
    STI    ;HABILITO LAS INTERRUPCIONES

LAZO:
    CMP DL,0
    JNZ LAZO
    HLT
    END

c)
    IMR EQU 21H
    TIMER EQU 10H  ;POSICION AL REGISTRO CONT DE TIMER
    
    ORG 40
    DW GESTOR
    
    ORG 1000H
MSJ DB "VAMOS LAS INTERRUPCIONES!",10  ;LF
FIN DB ?

    ORG 3000H
GESTOR:
    MOV AL, OFFSET FIN - OFFSET MSJ
    INT 7  ;IMPRIMO EL MENSAJE
    MOV AL,0
    OUT TIMER,AL
    DEC DL
    MOV AL,20H
    OUT IMR-1,AL  ;PONGO 20H EN EOI
    IRET

    ORG 2000H
    CLI    ;INHABILITO LAS INTERRUPCIONES
    MOV AL,11111101b  ; ENMASCARO TODAS LAS INTERRUPCIONES MENOS LA DE F10
    OUT IMR,AL
    MOV AL,10
    OUT IMR+4,AL
    MOV BX, OFFSET MSJ ;ME GUARDO LA DIRECCION DEL VECTOR DE CARACTERES (MSJ + LF)
    MOV DL,1  ; SIRVE PARA QUE EL GESTOR DEL TIMER SE EJECUTE UNA VEZ (DESPUES DE 10 SEGUNDOS) Y DESPUES ACABE EL PROGRAMA
    MOV AL,10  
    OUT TIMER+1,AL  ; PONGO EL REGISTRO COMP DEL TIMER EN 10
    MOV AL,0
    OUT TIMER,AL  ; PONGO EL CONT DEL TIMER EN 0
    STI    ;HABILITO LAS INTERRUPCIONES

LAZO:
    CMP DL,0
    JNZ LAZO
    HLT
    END

d)
    IMR EQU 21H
    TIMER EQU 10H  ;POSICION AL REGISTRO CONT DE TIMER
    
    ORG 40
    DW GESTOR
    
    ORG 1000H
MSJ DB "VAMOS LAS INTERRUPCIONES!",10  ;LF
FIN DB ?

    ORG 3000H
GESTOR:
    MOV AL, OFFSET FIN - OFFSET MSJ
    INT 7  ;IMPRIMO EL MENSAJE
    IN AL,TIMER+1  ; ME GUARDO EN AL EL VALOR DEL REGISTRO COMP DEL TIMER
    INC AL  ;INCREMENTO EL VALOR QUE ESTABA EN EL REGISTRO COMP DEL TIMER
    OUT TIMER+1,AL    ;GUARDO EN EL REGISTRO COMP SU VALOR PREVIO PERO INCREMENTADO
    MOV AL,0
    OUT TIMER,AL
    INC DL
    MOV AL,20H
    OUT IMR-1,AL  ;PONGO 20H EN EOI
    IRET

    ORG 2000H
    CLI    ;INHABILITO LAS INTERRUPCIONES
    MOV AL,11111101b  ; ENMASCARO TODAS LAS INTERRUPCIONES MENOS LA DE F10
    OUT IMR,AL
    MOV AL,10
    OUT IMR+4,AL
    MOV BX, OFFSET MSJ ;ME GUARDO LA DIRECCION DEL VECTOR DE CARACTERES (MSJ + LF)
    MOV DL,1  ; SIRVE PARA IRLA AUMENTANDO EN EL GESTOR DEL TIMER E IR CONTROLANDO LA VUELTA EN LA QUE ESTOY 
    MOV AL,1
    OUT TIMER+1,AL  ; PONGO EL REGISTRO COMP DEL TIMER EN 1
    MOV AL,0
    OUT TIMER,AL  ; PONGO EL CONT DEL TIMER EN 0
    STI    ;HABILITO LAS INTERRUPCIONES

LAZO:
    CMP DL,0
    JNZ LAZO
    HLT
    END
    


    
    
